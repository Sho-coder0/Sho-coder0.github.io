{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "width": 260,
  "height": 170,
  "title": {
    "text": "Fertility rate (births per woman)",
    "subtitle": "Zambia â€” World Bank, index (2015=100)"
  },
  "data": {
    "url": "https://raw.githubusercontent.com/Sho-coder0/Sho-coder0.github.io/refs/heads/main/CC6.%20data_ZMB_WB-SP.DYN.TFRT.IN.json",
    "format": {"type": "json", "property": "1"}
  },
  "transform": [
    {"filter": "datum.value != null"},
    {"calculate": "toDate(datum.date + '-01-01')", "as": "Year"},
    {
      "calculate": "datum.date == '2015' ? datum.value : null",
      "as": "base_candidate"
    },
    {
      "joinaggregate": [
        {"op": "max", "field": "base_candidate", "as": "base_2015"}
      ]
    },
    {
      "calculate": "datum.base_2015 == null ? null : datum.value / datum.base_2015 * 100",
      "as": "index"
    }
  ],
  "layer": [
    {
      "mark": {"type": "line"},
      "encoding": {
        "x": {"field": "Year", "type": "temporal"},
        "y": {
          "field": "index",
          "type": "quantitative",
          "scale": {"domain": [60, 110], "zero": false}
        }
      }
    },
    {
      "mark": {"type": "rule", "strokeDash": [4, 4], "color": "gray"},
      "encoding": {"y": {"datum": 100}}
    }
  ],
  "config": {"axis": {"grid": false}}
}